# Copyright (c) 2024 The ZMK Contributors
# SPDX-License-Identifier: MIT
#
# Charybdis Nano Configuration
# Shared configuration for both halves

# ============================================================================
# Split Keyboard Configuration
# ============================================================================
CONFIG_ZMK_SPLIT=y

# ============================================================================
# Bluetooth Configuration
# ============================================================================
CONFIG_ZMK_BLE=y

# Increase TX power for better range/reliability
CONFIG_BT_CTLR_TX_PWR_PLUS_8=y

# ============================================================================
# Power Management
# ============================================================================
# Enable deep sleep mode
CONFIG_ZMK_SLEEP=y

# Idle timeout before entering idle state (30 seconds)
CONFIG_ZMK_IDLE_TIMEOUT=30000

# Idle timeout before entering deep sleep (15 minutes)
CONFIG_ZMK_IDLE_SLEEP_TIMEOUT=900000

# ============================================================================
# Mouse/Pointing Configuration
# ============================================================================
# Enable mouse emulation and pointing device support
CONFIG_ZMK_MOUSE=y
CONFIG_ZMK_POINTING=y

# Enable input subsystem (required for PMW3610)
CONFIG_INPUT=y

# ============================================================================
# PMW3610 Driver Configuration
# ============================================================================
# SPI is required for PMW3610
CONFIG_SPI=y

# Enable PMW3610 driver (using pmw3610-alt to avoid conflict with upstream Zephyr)
CONFIG_PMW3610_ALT=y

# If experiencing product ID errors on power-up (0xFF instead of 0x3E),
# uncomment the following line to add initialization delay:
# CONFIG_PMW3610_ALT_INIT_POWER_UP_EXTRA_DELAY_MS=1000

# ============================================================================
# Debugging
# ============================================================================
# Enable USB logging for debugging
CONFIG_ZMK_USB_LOGGING=y
CONFIG_LOG_PROCESS_THREAD_STARTUP_DELAY_MS=8000
CONFIG_USB_CDC_ACM=y
CONFIG_SERIAL=y
